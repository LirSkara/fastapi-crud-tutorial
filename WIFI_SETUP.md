# üì° –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Wi-Fi —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ Raspberry Pi 5

## –ü—Ä–æ–±–ª–µ–º–∞ –æ–¥–Ω–æ–≥–æ Wi-Fi –∞–¥–∞–ø—Ç–µ—Ä–∞

Raspberry Pi 5 –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ **–æ–¥–∏–Ω –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Wi-Fi –∞–¥–∞–ø—Ç–µ—Ä**, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –º–æ–∂–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
- –ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Ä–æ—É—Ç–µ—Ä—É (–∫–∞–∫ –∫–ª–∏–µ–Ω—Ç)
- –†–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞

## –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### üîå –í–∞—Ä–∏–∞–Ω—Ç 1: Ethernet + Wi-Fi AP (–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Ethernet –∫–∞–±–µ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Ä–æ—É—Ç–µ—Ä—É
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Wi-Fi –¥–ª—è —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –ù–µ –Ω—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

**–ó–∞–ø—É—Å–∫:**
```bash
sudo ./setup_wifi_ap.sh
```

### üì∂ –í–∞—Ä–∏–∞–Ω—Ç 2: –î–≤–æ–π–Ω–æ–π Wi-Fi (USB –∞–¥–∞–ø—Ç–µ—Ä)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- USB Wi-Fi –∞–¥–∞–ø—Ç–µ—Ä
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Wi-Fi –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- USB Wi-Fi –¥–ª—è —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω–∞—è –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–∞—è —Å–≤–æ–±–æ–¥–∞
- –ú–æ–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å Pi –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π USB Wi-Fi –∞–¥–∞–ø—Ç–µ—Ä
- –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

**–ó–∞–ø—É—Å–∫:**
```bash
sudo ./setup_dual_wifi.sh
```

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ USB Wi-Fi –∞–¥–∞–ø—Ç–µ—Ä—ã

–î–ª—è —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–¥—Ö–æ–¥—è—Ç –∞–¥–∞–ø—Ç–µ—Ä—ã —Å —á–∏–ø–∞–º–∏:
- **RTL8188EU** (–¥–µ—à–µ–≤—ã–π, –ø–æ–ø—É–ª—è—Ä–Ω—ã–π)
- **RTL8192EU** (–±–æ–ª–µ–µ –º–æ—â–Ω—ã–π)
- **MT7601U** (—Ö–æ—Ä–æ—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

–ü—Ä–∏–º–µ—Ä—ã –º–æ–¥–µ–ª–µ–π:
- TP-Link AC600 T2U Plus
- ASUS USB-N13
- Netgear A6100

## –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: Ethernet + Wi-Fi AP
```
[–†–æ—É—Ç–µ—Ä] ‚Üê--Ethernet--‚Üí [Pi5] ‚Üê--Wi-Fi AP--‚Üí [–ü–ª–∞–Ω—à–µ—Ç/–¢–µ–ª–µ—Ñ–æ–Ω]
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–≤–æ–π–Ω–æ–π Wi-Fi
```
[–†–æ—É—Ç–µ—Ä] ‚Üê--Wi-Fi--‚Üí [Pi5 –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Wi-Fi]
                     [Pi5 USB Wi-Fi] ‚Üê--AP--‚Üí [–ü–ª–∞–Ω—à–µ—Ç/–¢–µ–ª–µ—Ñ–æ–Ω]
```

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –î–ª—è Ethernet + Wi-Fi AP:

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ Pi –∫ —Ä–æ—É—Ç–µ—Ä—É —á–µ—Ä–µ–∑ Ethernet**
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É:**
   ```bash
   sudo ./setup_wifi_ap.sh
   ```
3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:**
   ```bash
   sudo reboot
   ```
4. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Ç–æ—á–∫–µ –¥–æ—Å—Ç—É–ø–∞:**
   - SSID: `RaspberryPi-AP`
   - –ü–∞—Ä–æ–ª—å: `raspberry123`
   - IP Pi: `192.168.4.1`

### –î–ª—è –¥–≤–æ–π–Ω–æ–≥–æ Wi-Fi:

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ USB Wi-Fi –∞–¥–∞–ø—Ç–µ—Ä**
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É:**
   ```bash
   sudo ./setup_dual_wifi.sh
   ```
3. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—É—Ç–µ—Ä–∞:**
   ```bash
   sudo nano /etc/netplan/99-dual-wifi.yaml
   ```
   –ó–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_–†–û–£–¢–ï–†_SSID` –∏ `–í–ê–®_–ü–ê–†–û–õ–¨_–†–û–£–¢–ï–†–ê`

4. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```bash
   sudo netplan apply
   sudo reboot
   ```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—á–∫–æ–π –¥–æ—Å—Ç—É–ø–∞

```bash
# –ó–∞–ø—É—Å–∫
sudo systemctl start wifi-ap        # –¥–ª—è Ethernet –≤–∞—Ä–∏–∞–Ω—Ç–∞
sudo systemctl start dual-wifi      # –¥–ª—è USB –≤–∞—Ä–∏–∞–Ω—Ç–∞

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl stop wifi-ap
sudo systemctl stop dual-wifi

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable wifi-ap
sudo systemctl enable dual-wifi

# –°—Ç–∞—Ç—É—Å
sudo systemctl status wifi-ap
sudo systemctl status dual-wifi

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u wifi-ap -f
sudo journalctl -u dual-wifi -f
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:
```bash
ip addr show                    # –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
iwconfig                       # –ø–æ–∫–∞–∑–∞—Ç—å Wi-Fi –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞:
```bash
sudo systemctl status hostapd  # —Å—Ç–∞—Ç—É—Å —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞
sudo systemctl status dnsmasq  # —Å—Ç–∞—Ç—É—Å DHCP —Å–µ—Ä–≤–µ—Ä–∞
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
```bash
cat /var/lib/dhcp/dhcpd.leases  # DHCP –∞—Ä–µ–Ω–¥—ã
arp -a                          # ARP —Ç–∞–±–ª–∏—Ü–∞
```

## –î–æ—Å—Ç—É–ø –∫ FastAPI

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞:

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ç–∏ `RaspberryPi-AP`**
2. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: `http://192.168.4.1:8000/static/index.html`
   - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `http://192.168.4.1:8000/docs`

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl status hostapd
sudo systemctl status dnsmasq

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl restart hostapd
sudo systemctl restart dnsmasq
```

### –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ IP forwarding
cat /proc/sys/net/ipv4/ip_forward  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 1

# –ü—Ä–æ–≤–µ—Ä–∫–∞ iptables –ø—Ä–∞–≤–∏–ª
sudo iptables -t nat -L
```

### USB Wi-Fi –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤
lsusb

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Wi-Fi –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
iw dev

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä–∞–π–≤–µ—Ä–æ–≤
dmesg | grep -i wifi
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞:
```bash
sudo nano /etc/hostapd/hostapd.conf
# –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É: wpa_passphrase=–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å
sudo systemctl restart hostapd
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ SSID:
```bash
sudo nano /etc/hostapd/hostapd.conf
# –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É: ssid=–ù–æ–≤–æ–µ_–ù–∞–∑–≤–∞–Ω–∏–µ
sudo systemctl restart hostapd
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ MAC –∞–¥—Ä–µ—Å–æ–≤:
```bash
sudo nano /etc/hostapd/hostapd.conf
# –î–æ–±–∞–≤—å—Ç–µ:
# macaddr_acl=1
# accept_mac_file=/etc/hostapd/accept_mac
```
